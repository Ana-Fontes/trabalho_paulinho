var app = WebApplication.Create();

var alunos = new List<Aluno>();

app.MapGet("/alunos", () =>
{
    return alunos;
});

app.MapGet("/alunos/{id}", (int id) =>
{
    var aluno = alunos.FirstOrDefault(a => a.Id == id);
    return aluno is null ? Results.NotFound() : Results.Ok(aluno);
});

app.MapPost("/alunos", (Aluno aluno) =>
{
    // gera ID automÃ¡tico
    aluno.Id = alunos.Count > 0 ? alunos.Max(a => a.Id) + 1 : 1;
    alunos.Add(aluno);
    return Results.Ok("Aluno cadastrado!");
});


app.MapPut("/alunos/{id}", (int id, Aluno alunoAtualizado) =>
{
    var aluno = alunos.FirstOrDefault(a => a.Id == id);
    if (aluno is null) return Results.NotFound();

    aluno.Nome = alunoAtualizado.Nome;

    return Results.Ok("Aluno atualizado!");
});

app.MapDelete("/alunos/{id}", (int id) =>
{
    var aluno = alunos.FirstOrDefault(a => a.Id == id);
    if (aluno is null) return Results.NotFound();

    alunos.Remove(aluno);
    return Results.Ok("Aluno removido!");
});
